let J=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var se=Object.defineProperty,j=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,R=(e,t,n)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G=(e,t)=>{for(var n in t||(t={}))le.call(t,n)&&R(e,n,t[n]);if(j)for(var n of j(t))fe.call(t,n)&&R(e,n,t[n]);return e};function me(e){if(e===null||Array.isArray(e)&&e.length===0)return null;let t=Number(e);return Number.isNaN(t)?null:Number(e)}var ge=/([A-Z]{3})[scn]?/,de=/[A-Z]{3}([scn]?)/,be=/([A-Z]{3}[scn]?)/,ye=/([0,.[\]]+)/,pe=/\.\]?([0-9[\]]*)/,Ae=/\[\.\]/,w=/^\([^)]*\)/,Pe=/^([0-9]+)/,he=/^([0]+)/,Oe=/[aA]\)?$/,ve=/E\)?$/,Me=/A\)?$/,Fe=/e\)?$/,Ie=/a\)?$/,_e=/[aAeE]\)?$/,T=/\[([0]+)\]/,xe=/o\)?$/,Ne=/([0]+)/,C=/[0\]]\s[o%bBmk]/,Te=/^\+/,K=/^([0]+)/,$e=/b$/,we=/B$/,Ce=/[bB]$/,Q=/k\)?$/,Y=/m\)?$/,M=/[bBmik]\)?$/;function Se(e){if(Ie.test(e))return"short";if(Me.test(e))return"long"}function ke(e){let[,t]=e.match(ge)||[""];return t||void 0}function Ue(e){let[,t]=e.match(de)||[""];switch(t){case"s":return"narrowSymbol";case"c":return"code";case"n":return"name";default:return"symbol"}}function Be(e){return w.test(e)?"accounting":"standard"}function F(e){let[t]=ye.exec(e||"")||["0,000"];return t==="0,0"?"0,000":t}function ee(e){let[t]=pe.exec(e)||[""],[n]=Ne.exec(t)||[""],[,r]=T.exec(t)||["",""];return[n.length,r.length]}function Ve(e,t){let n=F(t),[r,o]=ee(n);return M.test(t)?Math.max(r+o,2):r+o}function Ee(e,t){let[n]=t;return n}function De(e,t){let n=F(t),[r,o]=ee(n);if(Ae.test(n)){let a=e.toString();return T.test(n)?Ee(e,[r,o]):a.indexOf(".")>-1?r:0}return T.test(n)?r:r+o}function te(e){let[t]=he.exec(e)||[""];return t.length}function Xe(e,t){let n=F(t);if(n==="0,000"||_e.test(t||""))return;let r=te(n),o=e.toString(),[a]=Pe.exec(o)||[""],[c]=K.exec(o)||[""];return Math.max(r,a.length-c.length)||void 0}function je(e){return Oe.test(e)?"compact":Fe.test(e)?"scientific":ve.test(e)?"engineering":"standard"}function Re(e){return w.test(e)?"never":Te.test(e)?"exceptZero":"auto"}function Ge(e){return be.test(e)?"currency":M.test(e)?"unit":e.includes("%")?"percent":"decimal"}function L(e,t){let n=Math.floor(Math.log(e)/Math.log(1024));return t[n]}function Le(e){let t=Math.abs(e);return t>999.9999?"kilometer":t>=.01&&t<=.0999?"centimeter":t>=.001&&t<=.00999?"millimeter":"meter"}function Ze(e){let t=Math.abs(e);return t>=.001&&t<=.00999?"gram":"kilogram"}function We(e,t){if(M.test(t)){if(Y.test(t))return Le(e);if(Q.test(t))return Ze(e);if($e.test(t))return L(e,["bit","kilobit","megabit","gigabit","terabit"]);if(we.test(t))return L(e,["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"])}}function qe(e){return M.test(e)&&!C.test(e)?"narrow":"short"}function ze(e){switch(e){case"en-GB":default:return new Map([["one","st"],["two","nd"],["few","rd"],["other","th"]])}}function He(e){let{value:t,formatted:n,locale:r,format:o}=e,a=new Intl.PluralRules(r,{type:"ordinal"}).select(t),c=ze(r).get(a);return C.test(o)?`${n} ${c}`:`${n}${c}`}function Je(e){return e.reduce((t,n)=>{let{type:r,value:o}=n;return r==="integer"?(t[r]=t[r]||[],t[r].push(o)):t[r]=o,t},{})}function Ke(e){let{value:t,numberFormatter:n,format:r}=e,{minusSign:o,integer:a,group:c,decimal:g,fraction:s,percentSign:A}=Je(n.formatToParts(t));return[o,a.join(c||""),g,s,C.test(r)&&" ",A].filter(Boolean).join("")}function Qe(e){let t=e;for(;t>=1024;)t/=1024;return t}function Ye(e){let t=Math.abs(e);return t>999.9999?e/1e3:t>=.01&&t<=.0999?e*100:t>=.001&&t<=.00999?e*1e3:e}function et(e){let t=Math.abs(e);return t>=.001&&t<=.00999?e*1e3:e}function tt(e,t){return Ce.test(t)?Qe(e):Y.test(t)?Ye(e):Q.test(t)?et(e):e}function nt(e){let{locale:t}=e||{},{locale:n,numberingSystem:r}=G(G({},Intl.DateTimeFormat(t).resolvedOptions()),e);return{locale:n,numberingSystem:r}}function $(e,t,n){let r=me(e);if(r===null)return"";let o=t||"0,0",{locale:a,numberingSystem:c}=nt(n),g=F(o),s=tt(r,o),A={compactDisplay:Se(o),currency:ke(o),currencyDisplay:Ue(o),currencySign:Be(o),maximumFractionDigits:Ve(s,o),minimumFractionDigits:De(s,o),minimumIntegerDigits:Xe(s,o),notation:je(o),numberingSystem:c,signDisplay:Re(o),style:Ge(o),useGrouping:g.includes(","),unit:We(r,o),unitDisplay:qe(o)},f=new Intl.NumberFormat(a,A),u=f.format(s);return te(g)===0&&(u=u.replace(K,"")),o.includes("%")&&(u=Ke({value:s,numberFormatter:f,format:o})),xe.test(o)&&(u=He({value:s,formatted:u,format:o,locale:a})),w.test(o)&&s<0&&(u=`(${u})`),u}$.partial=e=>t=>$(t,e);var S=$;S.partial("0,0.000");S.partial("0,0.00");S.partial("0,0");function Z(e){return e.reduce((t,n)=>t+n,0)/e.length}function W(e,t){return e.reduce((n,r)=>n+t(r),0)}function rt(e){var t=9007199254740881,n=2n**53n-111n,r=5667072534355537n,o=BigInt(e)%n;return function(){return Number(o=o*r%n)/t}}const ot=rt(Date.now());function at(e){return Math.floor(ot()*(e+1))}[1,2,3,4,6,12,18].map(e=>({label:e.toString(),value:e.toString()}));const ut=1e5,it=5e5;function ct(e){const t=[100,110].includes(e);return{isVIP:t,MAX_TO_COMPOUND:t?it:ut}}const ne={preProfit:33,usageFee:3},q=ne.preProfit/100,st=ne.usageFee/100;function lt(e){e.additionalAmount||(e.additionalAmount=0),e.additionalLimit||(e.additionalLimit=0)}function ft({iterationCount:e=1,iterationDays:t,initial:n,percentADay:r,firstIterationDays:o,additionalDeposits:a,withdrawSettings:c}){if(!n)return[];const g=r<0;r>0&&(r/=100),lt(a);const s=t,{isVIP:A,MAX_TO_COMPOUND:f}=ct(s);let u=0,b=0;const k=[];for(let P=1;P<=e;P++){const h=n,U=P===1&&o<s?s:o,d=[];let _=0,l=h;for(var I=1;I<=U;I++){if(u++,l<f&&(l+=a.additionalVolumeUsdtAmount,a.additionalLimit===0||b<=a.additionalLimit))switch(a.additionalAmountInterval){case"daily":{b++,l+=a.additionalAmount;break}case"weekly":{u%7===0&&(b++,l+=a.additionalAmount);break}case"bi-weekly":{u%14===0&&(b++,l+=a.additionalAmount);break}case"monthly":{u%30===0&&(b++,l+=a.additionalAmount);break}}const i=l,x=i<f;let m=0;g&&(r=(100+at(500)/200)/100),x?m=l*r-i:m=(r-1)*l;const V=m*q,N=m-V,E=N*st,D=N-E;m=D,_+=m,x&&(l>f?l=f:l+=m);const X=(r-1)*100,ce={day:I,daySinceBegin:u,startedWith:i,currentValue:l,canCompound:x,profitOfThisDay:m,usageFee:E,preProfit:V,after_preProfit:N,after_usageFee:D,profitUntilNow:_,percentADay:r,percentADayAfterCut:X-X*q};d.push(ce)}const B=h+_;let y=B,p=null;if(c!=null&&c.withdrawPercentInVFX){const i=y*c.withdrawPercentInVFX/100;y-=i,p={amountBeforeFeeTax:B,amountAfterTaxes:i,remainingAmount:y}}const O=y,re=W(d,i=>i.preProfit),oe=W(d,i=>i.usageFee),ae=O+((p==null?void 0:p.amountAfterTaxes)??0)-h,ue=Z(d.map(i=>i.percentADay))*100-100,ie=Z(d.map(i=>i.percentADayAfterCut));k.push({uuid:J(),amounts:{amountBeforeFeeTax:y,preProfit:re,usageFee:oe,amountAfterTaxes:O},withdrawInVFX:p,iteration:P,interests:d,days:U,principal:h,averagePercent:ue,averagePercentAfterCut:ie,profit:ae}),n=O<f?O:f}return k}function mt(e){return new Promise(t=>setTimeout(t,e))}let v=!1,z="",H={};self.addEventListener("message",async function(e){const t=J();v&&(H[z]=!0),z=t,v&&await mt(500),v=!0,console.info(e.data);const n=ft(e.data);H[t]||(self.postMessage(n),v=!1)},!1);
