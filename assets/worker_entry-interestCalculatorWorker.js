const _={devCut:15,usageFee:3,withdrawFee:5,vfxSell:7};let K=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var ce=Object.defineProperty,G=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,R=(e,t,n)=>t in e?ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W=(e,t)=>{for(var n in t||(t={}))le.call(t,n)&&R(e,n,t[n]);if(G)for(var n of G(t))fe.call(t,n)&&R(e,n,t[n]);return e};function me(e){if(e===null||Array.isArray(e)&&e.length===0)return null;let t=Number(e);return Number.isNaN(t)?null:Number(e)}var de=/([A-Z]{3})[scn]?/,ge=/[A-Z]{3}([scn]?)/,be=/([A-Z]{3}[scn]?)/,ye=/([0,.[\]]+)/,ve=/\.\]?([0-9[\]]*)/,he=/\[\.\]/,N=/^\([^)]*\)/,pe=/^([0-9]+)/,Ae=/^([0]+)/,Fe=/[aA]\)?$/,Oe=/E\)?$/,we=/A\)?$/,_e=/e\)?$/,Pe=/a\)?$/,xe=/[aAeE]\)?$/,C=/\[([0]+)\]/,Me=/o\)?$/,Ie=/([0]+)/,k=/[0\]]\s[o%bBmk]/,Se=/^\+/,Q=/^([0]+)/,Te=/b$/,Ce=/B$/,$e=/[bB]$/,Y=/k\)?$/,ee=/m\)?$/,P=/[bBmik]\)?$/;function Ne(e){if(Pe.test(e))return"short";if(we.test(e))return"long"}function ke(e){let[,t]=e.match(de)||[""];return t||void 0}function Ee(e){let[,t]=e.match(ge)||[""];switch(t){case"s":return"narrowSymbol";case"c":return"code";case"n":return"name";default:return"symbol"}}function Be(e){return N.test(e)?"accounting":"standard"}function x(e){let[t]=ye.exec(e||"")||["0,000"];return t==="0,0"?"0,000":t}function te(e){let[t]=ve.exec(e)||[""],[n]=Ie.exec(t)||[""],[,a]=C.exec(t)||["",""];return[n.length,a.length]}function Ue(e,t){let n=x(t),[a,r]=te(n);return P.test(t)?Math.max(a+r,2):a+r}function Ve(e,t){let[n]=t;return n}function De(e,t){let n=x(t),[a,r]=te(n);if(he.test(n)){let o=e.toString();return C.test(n)?Ve(e,[a,r]):o.indexOf(".")>-1?a:0}return C.test(n)?a:a+r}function ne(e){let[t]=Ae.exec(e)||[""];return t.length}function Xe(e,t){let n=x(t);if(n==="0,000"||xe.test(t||""))return;let a=ne(n),r=e.toString(),[o]=pe.exec(r)||[""],[s]=Q.exec(r)||[""];return Math.max(a,o.length-s.length)||void 0}function Le(e){return Fe.test(e)?"compact":_e.test(e)?"scientific":Oe.test(e)?"engineering":"standard"}function je(e){return N.test(e)?"never":Se.test(e)?"exceptZero":"auto"}function Ge(e){return be.test(e)?"currency":P.test(e)?"unit":e.includes("%")?"percent":"decimal"}function Z(e,t){let n=Math.floor(Math.log(e)/Math.log(1024));return t[n]}function Re(e){let t=Math.abs(e);return t>999.9999?"kilometer":t>=.01&&t<=.0999?"centimeter":t>=.001&&t<=.00999?"millimeter":"meter"}function We(e){let t=Math.abs(e);return t>=.001&&t<=.00999?"gram":"kilogram"}function Ze(e,t){if(P.test(t)){if(ee.test(t))return Re(e);if(Y.test(t))return We(e);if(Te.test(t))return Z(e,["bit","kilobit","megabit","gigabit","terabit"]);if(Ce.test(t))return Z(e,["byte","kilobyte","megabyte","gigabyte","terabyte","petabyte"])}}function He(e){return P.test(e)&&!k.test(e)?"narrow":"short"}function qe(e){switch(e){case"en-GB":default:return new Map([["one","st"],["two","nd"],["few","rd"],["other","th"]])}}function ze(e){let{value:t,formatted:n,locale:a,format:r}=e,o=new Intl.PluralRules(a,{type:"ordinal"}).select(t),s=qe(a).get(o);return k.test(r)?`${n} ${s}`:`${n}${s}`}function Je(e){return e.reduce((t,n)=>{let{type:a,value:r}=n;return a==="integer"?(t[a]=t[a]||[],t[a].push(r)):t[a]=r,t},{})}function Ke(e){let{value:t,numberFormatter:n,format:a}=e,{minusSign:r,integer:o,group:s,decimal:d,fraction:u,percentSign:y}=Je(n.formatToParts(t));return[r,o.join(s||""),d,u,k.test(a)&&" ",y].filter(Boolean).join("")}function Qe(e){let t=e;for(;t>=1024;)t/=1024;return t}function Ye(e){let t=Math.abs(e);return t>999.9999?e/1e3:t>=.01&&t<=.0999?e*100:t>=.001&&t<=.00999?e*1e3:e}function et(e){let t=Math.abs(e);return t>=.001&&t<=.00999?e*1e3:e}function tt(e,t){return $e.test(t)?Qe(e):ee.test(t)?Ye(e):Y.test(t)?et(e):e}function nt(e){let{locale:t}=e||{},{locale:n,numberingSystem:a}=W(W({},Intl.DateTimeFormat(t).resolvedOptions()),e);return{locale:n,numberingSystem:a}}function $(e,t,n){let a=me(e);if(a===null)return"";let r=t||"0,0",{locale:o,numberingSystem:s}=nt(n),d=x(r),u=tt(a,r),y={compactDisplay:Ne(r),currency:ke(r),currencyDisplay:Ee(r),currencySign:Be(r),maximumFractionDigits:Ue(u,r),minimumFractionDigits:De(u,r),minimumIntegerDigits:Xe(u,r),notation:Le(r),numberingSystem:s,signDisplay:je(r),style:Ge(r),useGrouping:d.includes(","),unit:Ze(a,r),unitDisplay:He(r)},m=new Intl.NumberFormat(o,y),i=m.format(u);return ne(d)===0&&(i=i.replace(Q,"")),r.includes("%")&&(i=Ke({value:u,numberFormatter:m,format:r})),Me.test(r)&&(i=ze({value:u,formatted:i,format:r,locale:o})),N.test(r)&&u<0&&(i=`(${i})`),i}$.partial=e=>t=>$(t,e);var re=$;re.partial("0,0.00");re.partial("0,0");function rt(e){return e.reduce((t,n)=>t+n,0)/e.length}function H(e,t){return e.reduce((n,a)=>n+t(a),0)}[1,2,3,4,6,12,18].map(e=>({label:e.toString(),value:e.toString()}));const at=1e5,ot=5e5;function ut(e){const t=[100,110].includes(e);return{isVIP:t,MAX_TO_COMPOUND:t?ot:at}}const it=_.vfxSell/100,q=_.withdrawFee/100,st=_.devCut/100,ct=_.usageFee/100;function lt(e){e.additionalAmount||(e.additionalAmount=0),e.additionalLimit||(e.additionalLimit=0)}function ft(e){var t=9007199254740881,n=2n**53n-111n,a=5667072534355537n,r=BigInt(e)%n;return function(){return Number(r=r*a%n)/t}}const mt=ft(Date.now());function dt(e){return Math.floor(mt()*(e+1))}function gt({iterationCount:e=1,iterationDays:t,initial:n,percentADay:a,firstIterationDays:r,additionalDeposits:o,withdrawSettings:s}){if(!n)return[];const d=a<0;a>0&&(a/=100),lt(o);const u=t,{isVIP:y,MAX_TO_COMPOUND:m}=ut(u);let i=0,v=0;const E=[];for(let F=1;F<=e;F++){const O=n,B=F===1&&!y?r<u?u:r:u,h=[];let I=0,c=O;for(var M=1;M<=B;M++){if(i++,c<m&&(c+=o.additionalVolumeBusdAmount,o.additionalLimit===0||v<=o.additionalLimit))switch(o.additionalAmountInterval){case"daily":{v++,c+=o.additionalAmount;break}case"weekly":{i%7===0&&(v++,c+=o.additionalAmount);break}case"bi-weekly":{i%14===0&&(v++,c+=o.additionalAmount);break}case"monthly":{i%30===0&&(v++,c+=o.additionalAmount);break}}const l=c,b=l<m;let f=0;d&&(a=(100.5+dt(4)/2)/100),b?f=c*a-l:f=(a-1)*c;const X=f*st,T=f-X,L=T*ct,j=T-L;f=j,I+=f,b&&(c>m?c=m:c+=f);const se={day:M,daySinceBegin:i,startedWith:l,currentValue:c,canCompound:b,profitOfThisDay:f,usageFee:L,devCut:X,after_devCut:T,after_usageFee:j,profitUntilNow:I,percentADay:a};h.push(se)}const U=O+I;let g=U,p=null;if(s!=null&&s.withdrawPercentInVFX){const l=g*s.withdrawPercentInVFX/100,b=l*q,f=l-b;g-=l,p={amountBeforeFeeTax:U,withdrawFee:b,after_withdrawFee:f,amountAfterTaxes:f,remainingAmount:g}}const V=g*q,S=g-V,D=S*it,A=S-D,ae=H(h,l=>l.devCut),oe=H(h,l=>l.usageFee),ue=A+((p==null?void 0:p.amountAfterTaxes)??0)-O,ie=rt(h.map(l=>l.percentADay))*100-100;E.push({uuid:K(),amounts:{amountBeforeFeeTax:g,devCut:ae,usageFee:oe,withdrawFee:V,after_withdrawFee:S,vfxSell:D,after_vfxSell:A,amountAfterTaxes:A},withdrawInVFX:p,iteration:F,interests:h,days:B,principal:O,averagePercent:ie,profit:ue}),n=A<m?A:m}return E}function bt(e){return new Promise(t=>setTimeout(t,e))}let w=!1,z="",J={};self.addEventListener("message",async function(e){const t=K();w&&(J[z]=!0),z=t,w&&await bt(500),w=!0,console.info(e.data);const n=gt(e.data);J[t]||(self.postMessage(n),w=!1)},!1);
